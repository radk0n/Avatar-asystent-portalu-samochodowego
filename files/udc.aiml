<?xml version="1.0" encoding="UTF-8"?>
<aiml version="2.0">
    <category>
        <pattern>Cześć</pattern>
        <template>Hej, jestem wirtualnym asystentem, 
        kóry pomoże Ci wybrać auto Twoich marzeń. 
        W czym mogę Ci pomóc?
        <button>
                <text>Chciałbym kupić auto</text>
                <postback>Brand</postback>
            </button>
        </template>
    </category>
   
    <category>
        <pattern>Brand</pattern>
        <template>
            Dobrze, zacznijmy od Twoich preferencji dotyczących auta.
            Jakiej marki auta szukasz?
        </template>
    </category>
    
    <category>
        <pattern>*</pattern>
        <that>JAKIEJ MARKI AUTA SZUKASZ</that>
        <template>
            <think><set name="brand"><star/></set></think>
            Rozumiem, czy szukasz konkretnego modelu? Jeżeli tak, podaj proszę model auta.
            Jeżeli nie, wpisz poprostu NIE.
        </template>
    </category>
    
    <category>
        <pattern>*</pattern>
        <that>JEŻELI NIE, WPISZ POPROSTU NIE</that>
        <template>
            <think><set name="model"><star/></set></think>
            Rozumiem, mam jeszcze kilka pytań. Jakiego typu auta szukasz?
        </template>
    </category>
    
    <category>
        <pattern>*</pattern>
        <that>JAKIEGO TYPU AUTA SZUKASZ</that>
        <template>
            <think><set name="type"><star/></set></think>
            Dobrze. Jakie paliwo chciałbyś tankować?
        </template>
    </category>
    
    <category>
        <pattern>*</pattern>
        <that>JAKIE PALIWO CHCIAŁBYŚ TANKOWAĆ</that>
        <template>
            <think>
                <set name="fuel"><star/></set>
                <set name="url">https://www.otomoto.pl/osobowe/</set>
        		<set name="url">
        			<get name="url"/>
        				<condition name="brand">
        					<li><get name="brand"/></li>
        				</condition>
        				<condition name="model">
        					<li value="NIE"></li>
        					<li>/<get name="model"/></li>
        				</condition>
        				<condition name="type">
        					<li value="małe">/seg-mini</li>
        					<li value="miejskie">/seg-citi-car</li>
        					<li>/seg-<get name="type"/></li>
        				</condition>
        				<condition name="fuel">
        				    <li value="benzyna">?search%5Bfilter_enum_fuel_type%5D%5B0%5D=petrol</li>
        				    <li value="gaz">?search%5Bfilter_enum_fuel_type%5D%5B0%5D=petrol-lpg</li>
        				    <li value="lpg">?search%5Bfilter_enum_fuel_type%5D%5B0%5D=petrol-lpg</li>
        				    <li value="ropa">?search%5Bfilter_enum_fuel_type%5D%5B0%5D=diesel</li>
        					<li value="diesel">?search%5Bfilter_enum_fuel_type%5D%5B0%5D=diesel</li>
        				</condition>
    			</set>
            </think>
            Podsumujmy wybrane kryteria...<br/><br/>
            Marka: <get name="brand"/><br/>
    		Model: <condition>
    		    <li value="NIE">Wszystkie<br/></li>
    		    <li><get name="model"/><br/></li>
    		</condition>
    		Typ: <get name="type"/><br/>
    		Paliwo: <get name="fuel"/><br/><br/>
            
            Czy wybrane kryteria się zgadzają? 
            Jeżeli tak, zaczniemy wyszukiwać auta Twoich marzeń.
            Jeżeli nie, zaczniemy dobór kryteriów od nowa.
            <button>
                <text>Szukaj!</text>
    		    <url><get name="url"/></url>
            </button>
            <button>
                <text>Od nowa</text>
                <postback>Brand</postback>
            </button>
        </template>
    </category>
</aiml>